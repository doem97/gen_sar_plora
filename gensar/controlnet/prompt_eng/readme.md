# Prompts Generation Flow

We put the propmts generation flow here. We use GPT-4-0314 officially provided by OpenAI [GPT-4-0314 API](https://platform.openai.com/docs/api-reference/chat/create).

```json
{
        "role": "system",
        "content": "You are a helpful assistant and a professional SAR image analyst.",
        "role": "user", 
        "content": f"Please complete following tasks step-by-step: Please use 500 words to introduce what the {ship_type} in SAR imagery may look like, and how to distinguish if from other ships, i.e., {remaining_type}. You should start with '{ship_type} in SAR image:'",
        "role": "assistant",
        "content": "Cargo in SAR image:\n\nSynthetic Aperture Radar (SAR) imagery is a powerful and versatile remote sensing technique used for identifying and monitoring various objects on the Earth's surface. In maritime applications, SAR has found significant value in detecting and characterizing ships, including cargo ships. Understanding the appearance of cargo ships in SAR images and their distinguishing features helps in optimizing maritime surveillance, security, and management.\n\nCargo in SAR images may appear as bright, elongated features with a discernible bow, amidships, and stern. The brightness results from the strong radar returns caused by the large metallic structure of the ship, which leads to a high radar cross-section (RCS). This high RCS makes cargo vessels more detectable than smaller and less reflective objects. The elongated shape, on the other hand, is a consequence of the ship's long, slim hull, designed to optimize cargo capacity while minimizing water resistance.\n\nIn SAR imagery, the bow of a cargo ship appears as a pointed or rounded end, which can be used to infer the direction of movement. The bow's appearance is critical for ship classification, as it can help differentiate cargo ships from other vessel types with similar characteristics. The amidships, which is the central part of the vessel, typically contains various deck structures and cargo containers. This area often features a complex pattern of bright and dark patches, resulting from shadow effects and multiple radar reflections off the deck structures.\n\nThe stern of the cargo ship is less pointed than the bow and may possess features such as cranes, loading equipment, or the ship's superstructure. These elements can create additional bright spots in the SAR image, hinting at the vessel's purpose and cargo handling capabilities. Additionally, the stern may show signs of a wake, a turbulent trail of water resulting from the ship's movement through the water. This wake can provide useful information about the vessel's speed and movement direction.\n\nCargo ships are a diversified and adaptable category of marine vessels, with varying sizes, dimensions, and configurations. As such, it is important to consider the following key differences when comparing cargo ships to other maritime vessels in SAR imagery:\n\n1. Fishing vessels: These ships are generally smaller and narrower than cargo ships, with specialized equipment such as fishing gear, booms, and nets. The clutter caused by such elements can give them a different appearance, with a more irregular pattern of bright and dark spots.\n\n2. Tanker ships: While similar in length and shape, tankers have a more rounded hull compared to cargo ships. Additionally, they lack the complex pattern of containers and deck structures typically found in cargo ships, leading to a smoother and more uniform appearance in SAR images.\n\n3. Dredger ships: Dredgers mostly operate near coastlines and are characterized by specific equipment for digging and transporting sediment. They often have a wider and more irregular shape, with visible dredging equipment on their deck.",
        "role": "user", 
        "content": f"Given these prior knowledges, please describe a {ship_type} in SAR image using {KEY_WORDS_ALL} keywords. You should focus on the discriminative features/structure/objects of {ship_type} in SAR as compared with {remaining_type} and focus on the common features of {ship_type} in SAR imagery. You should not introduce keywords of other ships by using negative expression, like 'no dredging machinery', as this will introduce noisy words. You should try to mention as much {ship_type} specific/relavent words as possible. This description should start with 'key features of {ship_type} in SAR image:'",
        "role": "assistant", 
        "content": "Key features of cargo in SAR image: rectangular hull shape, large flat surfaces, horizontal lines, vertical lines, box-like structures, uniform texture, long length, large beam, high radar reflectivity, rectangular containers, metallic objects, low superstructure, regularly-spaced objects, storage areas, cranes, container stacks, steady position, uncluttered areas, sharp edges, well-defined corners, right angles, mid-ship positioning, open spaces, unique scattering centers, cargo holds, roll-on/roll-off access, minimal nearby sea clutter, bright contrast areas, clutter suppression, parabolic shapes, antenna shadows, man-made structures, radar resolution, multi-frequency bands, polarization, low sidelobes, aspect angle, angular resolution, directional resolution, azimuth resolution, linear features, flat areas, minimal radar speckle, stacked cargoes, homogeneous regions, radar cross-section, broadsided detection, multiple corner reflectors, spatial frequencies, length-to-width ratio, cargo intensity, high SNR (signal-to-noise ratio), weather conditions, shipborne radar equipment, collision avoidance system, internal ship characteristics, containers positions, shipborne navigation lights, mooring facilities, low bow wake, apparent size, radar scattering, deck layout, coastal radar system, VHF antennas, radar transponders, SAR processing algorithms, digital recognition, ship classification, feature extraction, synthetic aperture radar, cargo signature, geometric parameters, man-made target, electromagnetic energy, information content, high regularity, coherent radar imagery, backscattering mechanism, geometric features, radar image formation, maritime traffic monitoring, ship identification, remote sensing, compact scatterers, relative velocity, automatic target recognition, radar imaging system, cargo vessel orientation, multi-view detection, single aspect detection, and radar echoes.",
        "role": "user", 
        "content": f"Please select combine {KEY_WORDS} keywords from this list to describe one {ship_type} instance in SAR image, please only use those high-quality words that can finely describe the key features of {ship_type}. You should start with 'Filtered key features of one {ship_type} instance in SAR image:'",
        }
```
We implement this prompt into the Python code and replace the items in `{GLOBAL_VARIABLES}` with actual value.